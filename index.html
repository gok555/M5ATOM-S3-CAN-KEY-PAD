<button onclick="connect()">Connect</button>
<pre id="out"></pre>

<script>
let char;

async function connect() {
  const device = await navigator.bluetooth.requestDevice({
    filters: [{ namePrefix: 'ATOM' }],
    optionalServices: ['12345678-1234-1234-1234-1234567890ab']
  });

  const server = await device.gatt.connect();
  const service = await server.getPrimaryService(
    '12345678-1234-1234-1234-1234567890ab'
  );

  char = await service.getCharacteristic(
    '12345678-1234-1234-1234-1234567890ac'
  );

  await char.startNotifications();
  char.addEventListener('characteristicvaluechanged', e => {
    const txt = new TextDecoder().decode(e.target.value);
    document.getElementById('out').textContent = txt;
  });
}
</script>
