<!DOCTYPE html>
<html>
<body>
<button onclick="send('1')">BTN1</button>
<button onclick="send('2')">BTN2</button>
<button onclick="send('3')">BTN3</button>
<button onclick="send('4')">BTN4</button>
<button onclick="send('5')">BTN5</button>
<button onclick="send('6')">BTN6</button>
<button onclick="send('7')">BTN7</button>
<button onclick="send('8')">BTN8</button>

<script>
let device, server, service, rxChar;

const SERVICE_UUID = '6e400001-b5a3-f393-e0a9-e50e24dcca9e';
const RX_UUID = '6e400002-b5a3-f393-e0a9-e50e24dcca9e';

async function connect() {
  device = await navigator.bluetooth.requestDevice({
    acceptAllDevices: true,
    optionalServices: [SERVICE_UUID]
  });
  server = await device.gatt.connect();
  service = await server.getPrimaryService(SERVICE_UUID);
  rxChar = await service.getCharacteristic(RX_UUID);
  alert("CONNECTED");
}

async function send(v) {
  if (!rxChar) return;
  await rxChar.writeValue(new TextEncoder().encode(v));
}

connect();
</script>
</body>
</html>
